<style>
	.monitoring { display: flex; flex-direction: column; gap: 25px; align-items: center; padding: 10px 0; }
	#total-online { color: #FF9400; }
	.monitoring-servers { display: flex; flex-wrap: wrap; gap: 20px; justify-content: center; width: 100%; }
	.server-card { background: rgba(255,255,255,0.08); backdrop-filter: blur(5px); border-radius: 10px; overflow: hidden; width: 48%; min-width: 200px; max-width: 500px; display: flex; flex-direction: column; color: white; box-shadow: 0 4px 15px rgba(0,0,0,0.2); transition: transform 0.3s; }
	.server-card:hover { transform: translateY(-5px); }
	.server-image { width: 100%; height: 150px; object-fit: cover; }
	.server-body { padding: 15px 20px; }
	.server-title { font-size: 1.4em; margin-bottom: 10px; color: #FF9400; }
	.server-desc { font-size: 0.95em; margin-bottom: 15px; }
	.server-online { font-size: 0.9em; color: #ccc; }
	.total-online-progress { width: 100%; max-width: 600px; margin: 20px 0; }
	.progress-header { display: flex; justify-content: center; align-items: center; gap: 5px; margin-bottom: 10px; font-size: 1.1em; }
	#total-online { color: #FF9400; font-weight: bold; font-size: 1.2em; }
	.progress-bar { width: 98%; height: 20px; background: rgba(255, 255, 255, 0.1); border-radius: 10px; overflow: hidden; position: relative; }
	.progress-fill { height: 98%; background: linear-gradient(90deg, #FF9400, #FFB74D); border-radius: 10px; transition: width 0.5s ease-in-out; position: relative; }
	.progress-fill::after { content: ""; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.3) 49%, transparent 100%); animation: shimmer 2s infinite; }
	@keyframes shimmer { 0% { transform: translateX(-100%); } 100% { transform: translateX(100%); } }
	@media (max-width: 768px) { .monitoring-header { flex-direction: column; align-items: flex-start; } .monitoring-header .online-count { margin-top: 5px; } .server-card { width: 98%; } }
</style>

<h2>Добро пожаловать</h2>
<p>Shield City — уникальный сервер Minecraft, где каждый игрок может расширять свои владения,
создавать семьи-кланы и прокачивать свои возможности для выживания и доминирования!
Здесь у вас есть свобода выбора: строить защиту своей территории, прокачивать себя,
укреплять силы своей семьи или отправляться на завоевание чужих участков.</p>

<h2>Особенности игры на Shield City</h2>
<ul>
	<li>Расширяй и защищай свои владения: Прокачивайте Шилдбокс — специальный защитный блок,
	который укрепит ваш участок и поможет обороняться от нападений других игроков.
	Поднимайтесь в уровне защиты, чтобы стать неуязвимым, или используйте мощь Шилдбокса,
	чтобы разрушить владения соперников!</li>
	<li>Создавай семью: Станьте частью семьи-клана, где вас поддержат и дадут игровое преимущество.
	Семья предоставляет почти бесконечные хранилища ресурсов и возможность захватывать территории
	для получения редких эффектов, которые будут работать на ваших союзников до 3 дней!</li>
	<li>Выбирайте свой путь: Вы можете выбрать спокойный путь и сосредоточиться на мирных занятиях,
	как торговля, исследование мира и участие в событиях. Или вступите в борьбу за власть и
	захватывайте ценные территории.</li>
	<li>События и ивенты: Участвуйте в различных игровых событиях, зарабатывайте награды и
	доказывайте свое мастерство! На сервере постоянно проходят активности, где можно получить
	редкие предметы и уникальные достижения.</li>
	<li>Продуманная система перков: Удобный и справедливый способ прокачки позволяет получать
	только нужные функции, при этом все они доступны за игровые предметы, которые можно добыть и
	скрафтить в процессе игры. Мы верим, что баланс — главное, и на сервере Shield City каждый
	может развиваться честным путем.</li>
</ul>

<h2>Серверы</h2>
<div class="monitoring">
	<div class="monitoring-servers"> </div>
	<div class="total-online-progress">
		<div class="progress-header">
			<span>Общий онлайн: </span>
			<span id="total-online">0</span><span></span>
		</div>
		<div class="progress-bar">
			<div class="progress-fill" style="width: 0%"></div>
		</div>
	</div>
</div>

<script>
	const servers = [
		// { name: "Vanilla 1.21", img: "vanilla.jpg", desc: "Классический сервер без модов. Чистый игровой процесс и честная конкуренция.", ip: "45.93.200.89/25565" }
		{ name: "Forge 1.20.1", img: "forge.jpg", desc: "Сервер с модами. Дополнительные возможности, крафт и уникальный опыт.", ip: "45.93.200.89/25566" }
	];

	const monitoringServersContainer = document.querySelector(".monitoring-servers");
	const totalOnlineElement = document.getElementById("total-online");
	const progressFillElement = document.querySelector(".progress-fill");

	if (!monitoringServersContainer || !totalOnlineElement || !progressFillElement) {
		console.warn("Элементы мониторинга не найдены");
	} else {

		async function fetchServerStatus(server) {
			try {
				const response = await fetch(`https://api.minetools.eu/ping/${server.ip}`);
				if (!response.ok) throw new Error(`Ошибка загрузки: ${response.status}`);
				const data = await response.json();
				
				return {
					name: server.name,
					img: server.img,
					desc: server.desc,
					online: data.players?.online || 0,
					max: data.players?.max || 0
				};
			} catch (err) {
				console.error(`Не удалось получить статус сервера ${server.name}:`, err);
				return {
					name: server.name,
					img: server.img,
					desc: server.desc,
					online: 0,
					max: 0
				};
			}
		}

		async function updateServers() {
			const serverPromises = servers.map(server => fetchServerStatus(server));
			const serverStatuses = await Promise.all(serverPromises);

			monitoringServersContainer.innerHTML = "";
			let totalOnline = 0;
			let totalMax = 0;

			serverStatuses.forEach(server => {
				totalOnline += server.online;
				totalMax += server.max;

				const card = document.createElement("div");
				card.className = "server-card";
				card.innerHTML = `
					<img src="img/${server.img || 'default.jpg'}" alt="${server.name} Server" class="server-image">
					<div class="server-body">
						<div class="server-title">${server.name}</div>
						<div class="server-desc">${server.desc}</div>
						<div class="server-online">Онлайн: <span class="server-online-count">${server.online}</span> / ${server.max}</div>
					</div>
				`;
				monitoringServersContainer.appendChild(card);
			});

			totalOnlineElement.textContent = totalOnline + "/" + totalMax;
			const progressPercent = totalMax > 0 ? (totalOnline / totalMax) * 100 : 0;
			progressFillElement.style.width = `${progressPercent}%`;
		}

		updateServers();
		setInterval(updateServers, 5000);
	}
</script>
